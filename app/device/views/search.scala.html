@(form: Form[BrasOutlier],email: String,rsInfhost: model.device.HostResponse,response: model.device.BrasResponse,day: String,bras: String,_typeS: String, postUrl: Call)(implicit request: RequestHeader)
@import play.api.libs.json.Json
@import services.domain.CommonService.formatPattern
@import play.api.libs.json.Json

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <!-- Meta, title, CSS, favicons, etc. -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Dashboard Admin </title>

            <!-- Bootstrap -->
        @common.views.html.common.css("BrasDetail")
    </head>
    @common.views.html.common.top()
        <!-- top navigation -->
    <div class="top_nav">
        <div class="nav_menu">
            <nav>
                <div class="nav toggle" style="margin-bottom: 10px">
                    <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                </div>

                <div style="margin-top: 10px" class="col-md-2 col-sm-2 col-xs-12 form-group  top_search">
                    <form action="/searchBrasHost" method="POST" id="ctSearch">
                        @helper.CSRF.formField
                        <input type="hidden" id="_typeS" name="_typeS" value="@_typeS">
                        <input type="hidden" id="date" name="date" value="@day">
                        <input type="text" style="height: 36px" class="form-control autocomplete search" required id="bras" name="bras" placeholder="Search bras..." value="@bras">
                    </form>

                </div>
                <div class="col-lg-2 col-sm-2 col-xs-12 radioBtn">
                    <div class="input-group">
                        <div id="radioBtn" class="btn-group">
                            @if(_typeS.equals("B")) {
                                <a class="btn btn-primary btn-sm active" data-toggle="search" style="height: 33px" data-title="B">BRAS</a>
                                <a class="btn btn-primary btn-sm notActive" data-toggle="search" style="height: 33px" data-title="I">HOST</a>
                            }else{
                                <a class="btn btn-primary btn-sm notActive" data-toggle="search" style="height: 33px" data-title="B">BRAS</a>
                                <a class="btn btn-primary btn-sm active" data-toggle="search" style="height: 33px" data-title="I">HOST</a>
                            }
                        </div>
                    </div>
                </div>
            </nav>
            <ul class="nav navbar-nav navbar-right">
                <li class="">
                    <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <img src="../assets/images/user.default.png" alt="">@email
                        <span class=" fa fa-angle-down"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-usermenu pull-right">
                        <li><a href="/logout"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                    </ul>
                </li>
                <li class="form-group pull-right" style="margin-top: 13px;right: 10px">

                    <ul class="nav navbar-nav navbar-right">
                        <li class="form-group pull-right" style="right: 10px">
                            <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">
                                <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                <span></span> <b class="caret"></b>
                            </div>
                        </li>
                    </ul>

                </li>
            </ul>

        </div>
    </div>
        <!-- /top navigation -->
        <!-- page content -->
    <div class="right_col" role="main">
        <!-- PAGE INF SEARCH -->
        @if(rsInfhost != null){
            <div class="row top_tiles">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_title">
                        <h2 class="hvr-pulse txtHead">Host: @bras</h2>

                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
            <div class="row top_tiles">
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="tile-stats" style="background-color: #f1b53d;display: inherit;padding: 14px;height: 138px">
                        <div class="count ">@rsInfhost.noOutlierModule</div>
                        <div class="titLb">Outlier</div>
                    </div>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                    <div class="x_panel tile fixed_height_350" style="padding: 0px;">
                        <div class="x_content">
                            <table class="data table table-bordered tbScroll" id="tbInfHost" style="width: 100%">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Sf error</th>
                                        <th>Lofi error</th>
                                        <th>Port PON down</th>
                                        <th>Port INF down</th>
                                        <th>Rouge error</th>
                                        <th>Lost signal</th>
                                        <th>Sf Module</th>
                                    </tr>
                                </thead>
                                @if(rsInfhost.infHostdaily != null) {
                                    <tfoot>
                                        <tr>
                                            <th>Total</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._2).sum</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._3).sum</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._4).sum</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._5).sum</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._6).sum</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._7).sum</th>
                                            <th>@rsInfhost.infHostdaily.map(x=>x._8).sum</th>
                                        </tr>
                                    </tfoot>
                                    <tbody >
                                    @for(i <- 0 until rsInfhost.infHostdaily.length) {
                                        <tr>
                                            <td>@rsInfhost.infHostdaily(i)._1</td>
                                            <td>@rsInfhost.infHostdaily(i)._2</td>
                                            <td>@rsInfhost.infHostdaily(i)._3</td>
                                            <td>@rsInfhost.infHostdaily(i)._4</td>
                                            <td>@rsInfhost.infHostdaily(i)._5</td>
                                            <td>@rsInfhost.infHostdaily(i)._6</td>
                                            <td>@rsInfhost.infHostdaily(i)._7</td>
                                            <td>@rsInfhost.infHostdaily(i)._8</td>
                                        </tr>
                                    }
                                    </tbody>
                                }
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row top_tiles">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <div class="x_panel tile" style="padding: 0px">
                        <div class="card-header">
                            Total Error By Time <i class="fa fa-info-circle toolTipText" title="Thống kê lỗi thiết bị Access theo từng loại lỗi và giờ trong ngày"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content fixed_height_320">
                            <div class="container">
                                <ul class="nav nav-pills nav-stacked col-md-2" style="margin-top: 40px">
                                    <li name="0" style="cursor: pointer" class="active"><a data-toggle="pill">HOURLY</a></li>
                                    <li name="1" style="cursor: pointer"><a style="font-size: 12px" data-toggle="pill">FRAME TIME</a></li>
                                </ul>
                                <div class="tab-content col-md-10">
                                    <div id="heat_mapInfTab" style="height: 250px;"></div>
                                </div><!-- tab content -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <div class="x_panel tile" style="padding: 0px">
                        <div class="card-header">
                           Signin & Logoff By Module And Index <i class="fa fa-info-circle toolTipText" title="Thống kê hoạt động kết nối mạng theo từng module và index của thiết bị Access"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content fixed_height_320">
                            <div id="buble-module" style="height: 250px;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row top_tiles">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel tile" style="padding: 25px 50px">
                        <div id="time-line-host"></div>
                    </div>
                </div>
            </div>
            <div class="row top_tiles">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <div class="x_panel tile" style="padding: 0px">
                        <div class="card-header">
                            Suyhao By Module <i class="fa fa-info-circle toolTipText" title="Thống kê tín hiệu suy hao đạt/không đạt và tỉ lệ đạt theo từng module"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content fixed_height_320">
                            <div id="line-suyhao" style="height: 250px;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <div class="x_panel tile" style="padding: 0px">
                        <div class="card-header">
                            Signin & Logoff By Time <i class="fa fa-info-circle toolTipText" title="Thống kê hoạt động kết nối mạng theo giờ trong ngày"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content fixed_height_320">
                            <div id="col-lineSigLog" style="height: 250px;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row top_tiles">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                    <div class="x_panel tile" style="height: 375px;padding: 0px;">
                        <div class="card-header">
                            Total Error By Module And Index <i class="fa fa-info-circle toolTipText" title="Thống kê lỗi thiết bị Access theo từng module và index của thiết bị Access"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <input id="nModule" type="hidden" value="@rsInfhost.errModuleIndex.arrModule.length"/>
                            @if(rsInfhost.errModuleIndex.arrModule.length >0) {
                                <table class="data table table-bordered tbScroll" id="tbIndex" style="width: 100%">
                                    <thead>
                                        <tr>
                                            <th class="background">
                                                <div><span class="bottom">Index</span>
                                                    <span class="top">Module</span>
                                                    <div class="line"></div>
                                                </div>
                                            </th>
                                            @for(i <- 0 until rsInfhost.errModuleIndex.arrModule.length) {
                                                <th class="txtCenter">@rsInfhost.errModuleIndex.arrModule(i)</th>
                                            }
                                            <th class="txtCenter">Total</th>
                                        </tr>
                                    </thead>
                                    <tfoot>
                                        <tr>
                                            <th class="txtCenter">Total</th>
                                            @for(i <- 0 until rsInfhost.errModuleIndex.arrModule.length) {
                                                <th class="txtCenter" id="tdSum@i"></th>
                                            }
                                            <th class="txtCenter" id="ttSum"></th>
                                        </tr>
                                    </tfoot>
                                    <tbody>
                                        @tableIndex(rsInfhost.errModuleIndex.arrModule,rsInfhost.errModuleIndex.arrIndex,rsInfhost.errModuleIndex.err)
                                    </tbody>
                                </table>
                            }else {
                                <div style="font-size: 14px;text-align: center">No data available in table</div>
                            }
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                    <div class="x_panel tile " style="height: 375px;padding: 0px;">
                        <div class="card-header">
                            Cause Of Port Pon Down <i class="fa fa-info-circle toolTipText" title="Danh sách module bị rớt port pon và nguyên nhân"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <table class="data table table-bordered tbScroll" id="tbSf" style="width: 100%">
                                <thead >
                                    <tr>
                                        <th>Date Time</th>
                                        <th>Module</th>
                                        <th>Result</th>
                                    </tr>
                                </thead>
                                @if(rsInfhost.sfContract != null) {
                                    <tbody >
                                    @for(i <- 0 until rsInfhost.sfContract.length) {
                                        <tr>
                                            <th>@rsInfhost.sfContract(i)._1</th>
                                            <th>@rsInfhost.sfContract(i)._2</th>
                                            <td>@rsInfhost.sfContract(i)._3</td>
                                        </tr>
                                    }
                                    </tbody>
                                }
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                    <div class="x_panel tile" style="height: 375px;padding: 0px;">
                        <div class="x_content">
                            <table class="data table table-bordered tbScroll" id="tbSplitter" style="width: 100%">
                                <thead  style="background: #4980b5;color:#fff">
                                    <tr>
                                        <th>Date Time</th>
                                        <th>Splitter</th>
                                        <th>Lost Signal</th>
                                    </tr>
                                </thead>
                                @if(rsInfhost.splitterByHost != null) {
                                    <tfoot>
                                        <tr>
                                            <th colspan="2">Total</th>
                                            <th>@rsInfhost.splitterByHost.map(x=>x._3).sum</th>
                                        </tr>
                                    </tfoot>
                                    <tbody >
                                    @for(i <- 0 until rsInfhost.splitterByHost.length) {
                                        <tr>
                                            <td>@rsInfhost.splitterByHost(i)._1</td>
                                            <td>@rsInfhost.splitterByHost(i)._2</td>
                                            <td>@rsInfhost.splitterByHost(i)._3</td>
                                        </tr>
                                    }
                                    </tbody>
                                }
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        }
        <!-- PAGE BRAS SEARCH -->
        @if(response != null) {
            <div class="row top_tiles">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_title">
                        <h2 class="hvr-pulse txtHead">Bras: @bras</h2>

                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>

            <div class="row top_tiles">
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-12">
                    <div class="tile-stats" style="background-color: #64b0f2;
                        display: inherit">
                        <div class="count ">@formatPattern(response.currentsInfo.noOutlier)</div>
                        <div class="titLb">Outlier of Bras</div>
                    </div>
                </div>
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-12">
                    <div class="tile-stats" style="background-color: #f1b53d;
                        display: inherit">
                        <div class="count ">@formatPattern(response.currentsInfo.siginLogoff._1)</div>
                        <div class="titLb">Signin</div>
                    </div>
                </div>
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-12">
                    <div class="tile-stats" style="display: inherit;
                        background-color: #345F90">
                        <div class="count ">@formatPattern(response.currentsInfo.siginLogoff._2)</div>
                        <div class="titLb">Logoff</div>
                    </div>
                </div>
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-12">
                    <div class="tile-stats" style="background-color: #832d1d;
                        display: inherit">
                        <div class="count ">@formatPattern(response.currentsInfo.siginLogoffClients._1)</div>
                        <div class="titLb">Signin Clients</div>
                    </div>
                </div>
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-12" >
                    <div class="tile-stats" style="display: inherit;
                        background-color: #73879C">
                        <div class="count ">@formatPattern(response.currentsInfo.siginLogoffClients._2)</div>
                        <div class="titLb">Logoff Clients</div>
                    </div>
                </div>
                <div class="boxCss animated flipInY col-lg-2 col-md-2 col-sm-2 col-xs-12">
                    <div class="tile-stats" style="display: inherit;
                        background-color: #ff5d48">
                        <div class="count">@response.currentsInfo.noOutlierByhost</div>
                        <div class="titLb">Outlier of Hosts</div>
                    </div>
                </div>
            </div>

            <div class="row top_tiles">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel tile" style="padding: 25px 50px">
                        <div id="time-line-bras"></div>
                    </div>
                </div>
            </div>

            <div class="row top_tiles">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel tile fixed_height_320">
                        <div class="x_title">
                            <h2 style="font-weight: 500;
                                font-size: 24px"> Nerror (kibana & opview) By Time </h2>
                            <i class="fa fa-info-circle toolTipText" title="Thống kê lỗi thiết bị BRAS (kibana) và sự thay đổi trạng thái các service quản lý (opsview) theo giờ trong ngày"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div id="int-col-hourly" style="height: 250px;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row top_tiles">
                <div class="col-md-6 col-sm-6 col-xs-6">
                    <div class="x_panel tile fixed_height_320">
                        <div class="x_title">
                            <h2 style="font-weight: 500;
                                font-size: 24px"> Signin & Logoff By Linecard-card-port </h2>
                            <i class="fa fa-info-circle toolTipText" title="Thống kê hoạt động ra vào mạng theo linecard - card - port"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div id="buble-card" style="height: 250px;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6">
                    <div class="x_panel tile fixed_height_320">
                        <div class="x_title">
                            <h2 style="font-weight: 500;
                                font-size: 24px"> Signin & Logoff By Time</h2>
                            <i class="fa fa-info-circle toolTipText" title="Thống kê hoạt động ra vào mạng theo giờ trong ngày"></i>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div id="line-hourly" style="height: 250px;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row top_tiles">
                <div class="" role="tabpanel" data-example-id="togglable-tabs">
                    <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                        <li role="presentation" class="active"><a href="#tab_inf" id="inf-tab" role="tab" data-toggle="tab" aria-expanded="true">
                            INF</a>
                        </li>
                        <li role="presentation" class=""><a href="#tab_kibana" id="kibana-tab" role="tab" data-toggle="tab" aria-expanded="true">
                            Kibana</a>
                        </li>
                        <li id="tabOp" role="presentation" class=""><a href="#tab_opview" id="opview-tab" role="tab" data-toggle="tab" aria-expanded="true">
                            Opview</a>
                        </li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                        <div role="tabpanel" class="tab-pane fade" id="tab_kibana" aria-labelledby="kibana-tab">

                            <div class="col-lg-4 col-sm-4 col-md-4 col-xs-12">
                                <div class="x_panel tile fixed_height_320" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Severity <i class="fa fa-info-circle toolTipText" title="Thống kê số lỗi thiết bị BRAS theo mức độ lỗi"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="pie-severity" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4 col-xs-12">
                                <div class="x_panel tile fixed_height_320" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Error Type <i class="fa fa-info-circle toolTipText" title="Thống kê số lỗi thiết bị BRAS theo phân loại lỗi"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="bar-error" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4 col-xs-12">
                                <div class="x_panel tile fixed_height_320" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Facility <i class="fa fa-info-circle toolTipText" title="Thống kê số lỗi thiết bị BRAS theo bộ phận thiết bị"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="pie-facility" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        Ntime By Ddos <i class="fa fa-info-circle toolTipText" title="Thống kê số lần bị DDOS theo từng giao thức"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="col-ddos" style="height: 318px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                <div class="x_panel tile fixed_height_350" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Error And Severity <i class="fa fa-info-circle toolTipText" title="Thống kê số lỗi thiết bị BRAS theo từng lỗi"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <table class="data table table-bordered" style="margin-bottom: 0px">
                                            <thead>
                                                <th class="thTop" style="width: 14.5%">Type</th>
                                                <th class="thTop" style="width: 16.5%">Severity</th>
                                                <th class="thTop" style="width:58%;">Error_name</th>
                                                <th class="thTop">Nerror</th>
                                            </thead>
                                        </table>
                                        <div  style="height: 283px;overflow: auto">
                                        <table class="data table table-bordered">
                                            <tbody>
                                            @for(i <- 0 until response.kibanaOverview.arrSevValue.length) {
                                                <tr>
                                                    <td style="width: 10%">@response.kibanaOverview.arrSevValue(i)._1</td>
                                                    <td style="width: 18%">@response.kibanaOverview.arrSevValue(i)._2</td>
                                                    <td style="width: 60%">@response.kibanaOverview.arrSevValue(i)._3</td>
                                                    <td>@response.kibanaOverview.arrSevValue(i)._4</td>
                                                </tr>
                                            }
                                            </tbody>
                                        </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div role="tabpanel" class="tab-pane fade" id="tab_opview" aria-labelledby="opview-tab">
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Status <i class="fa fa-info-circle toolTipText" title="Thống kê số thay đổi trạng thái của service quản lý theo từng trạng thái"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="tree-map" style="height: 300px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Service And Status <i class="fa fa-info-circle toolTipText" title="Thống kê số thay đổi trạng thái theo từng service quản lý và trạng thái"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div>
                                        <table class="data table table-bordered" style="margin-bottom: 0px">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50%" class="thTop">Service name</th>
                                                    @for(i <- 0 until response.servNameStt.arrStatus.length) {
                                                        <th style="width: @(40/response.servNameStt.arrStatus.length)%" class="thTop">@response.servNameStt.arrStatus(i)</th>
                                                    }
                                                    <th class="thTop">Total</th>
                                                </tr>
                                            </thead>
                                        </table>
                                        </div>
                                        <div style="height: 226px;overflow: auto">
                                            <table class="data table table-bordered tbScroll" id="tbOpview" style="margin-bottom: 0px">
                                                <tbody >
                                                </tbody>
                                            </table>
                                        </div>
                                        <table class="data table table-bordered" style="margin-bottom: 0px">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50%">Total</th>
                                                    @for(i <- 0 until response.servNameStt.arrStatus.length) {
                                                        <th style="width: @(40/response.servNameStt.arrStatus.length)%" id="col-@i"></th>
                                                    }
                                                    <th id="ttColall"></th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane fade active in" id="tab_inf" aria-labelledby="inf-tab">
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror By Time <i class="fa fa-info-circle toolTipText" title="Thống kê tổng số lỗi thiết bị Access theo giờ trong ngày và theo từng loại lỗi"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="heat_map" style="height: 300px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        Signin and Logoff By Host <i class="fa fa-info-circle toolTipText" title="Thống kê hoạt động ra vào mạng theo thiết bị Access trong BRAS"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="line-host" style="height: 300px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        No. Of Alert By Switch And Status <i class="fa fa-info-circle toolTipText" title="Thống kê số cảnh báo theo từng Switch và trạng thái"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="col-service" style="height: 370px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        No. Of Alert By Switch And Monitoring Service <i class="fa fa-info-circle toolTipText" title="Thống kê số thay đổi trạng thái theo từng Switch và service quản lý"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        @if(response.sankeyService.map(x=> x._1).distinct.length <= 4){
                                            <div id="sankey-service" style="height: 370px;"></div>
                                        }else{
                                            <div id="sankey-service" style="height: 570px;"></div>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;">
                                    <div class="card-header">
                                        Nerror Of Power Devices By Service And Status <i class="fa fa-info-circle toolTipText" title="Thống kê số thay đổi trạng thái theo từng service quản lý và trạng thái của thiết bị Power"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div>
                                            <table class="data table table-bordered" style="width: 100%;margin-bottom: 0px">
                                                <thead>
                                                    <tr>
                                                        <th style="width: 20%" class="thTop">Bras Id</th>
                                                        <th style="width: 20%" class="thTop">Service Name</th>
                                                        @for(i <- 0 until response.devNameStt.arrStatus.length) {
                                                            <th style="width: @(45/response.devNameStt.arrStatus.length)%" class="thTop">@response.devNameStt.arrStatus(i)</th>
                                                        }
                                                        <th class="thTop" style="width: 15%">Total</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                        <div style="height: 226px;overflow: auto">
                                            <table class="data table table-bordered tbScroll" id="tbInfSev" style="margin-bottom: 0px">
                                                <tbody >
                                                </tbody>
                                            </table>
                                        </div>
                                        <table class="data table table-bordered" style="margin-bottom: 0px">
                                            <thead>
                                                <tr>
                                                    <th style="width: 40%">Total</th>
                                                    @for(i <- 0 until response.devNameStt.arrStatus.length) {
                                                        <th class="infAll_@response.devNameStt.arrStatus(i)" style="width: @(45/response.devNameStt.arrStatus.length)%"></th>
                                                    }
                                                    <th id="ttColallDev" style="width: 15%"></th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="x_panel tile" style="padding: 0px;height: 355px">
                                    <div class="card-header">
                                        Nerror By Host, Module And Error <i class="fa fa-info-circle toolTipText" title="Thống kê lỗi thiết bị Access theo từng thiết bị Access trong BRAS"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <table class="data table table-bordered tbScroll" id="tbBras" style="width: 100%">
                                            <thead>
                                                <tr>
                                                    <th>Host Id</th>
                                                    <th>Module</th>
                                                    <th>Sf</th>
                                                    <th>Lofi</th>
                                                    <th>Total</th>
                                                </tr>
                                            </thead>
                                            @if(response.infModuleBytime != null) {
                                                <tfoot>
                                                    <tr>
                                                        <th colspan="2">Total</th>
                                                        <th>@response.infModuleBytime.map(x => x._3).sum</th>
                                                        <th>@response.infModuleBytime.map(x => x._4).sum</th>
                                                        <th>@response.infModuleBytime.map(x => x._5).sum</th>
                                                    </tr>
                                                </tfoot>
                                                <tbody >
                                                @for(i <- 0 until response.infModuleBytime.length) {
                                                    <tr>
                                                        <td class="textGroup">@response.infModuleBytime(i)._1</td>
                                                        <td class="textGroup">@response.infModuleBytime(i)._2</td>
                                                        <td>@response.infModuleBytime(i)._3</td>
                                                        <td>@response.infModuleBytime(i)._4</td>
                                                        <th>@response.infModuleBytime(i)._5</th>
                                                    </tr>
                                                }
                                                </tbody>
                                            }
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        @if(response == null && rsInfhost == null ){
            <div class="row"><h2 class="noData-title">Not enough data. Please enter on text search.</h2></div>
        }
    </div>
        <!-- /page content -->

        <!-- footer content -->
    <footer>
        <div class="pull-right">
            Dashboard Admin Monitor 2018
        </div>
        <div class="clearfix"></div>
    </footer>
        <!-- /footer content -->
    </div>
    </div>

        <!-- jQuery -->
    <script src="../assets/vendors/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap -->
    <script src="../assets/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- Custom Theme Scripts -->
    <script src="../assets/custom/js/custom.min.js"></script>
        <!-- Hight chart -->
    <script src="../assets/javascripts/highcharts.js"></script>
    <script src="../assets/javascripts/highcharts-more.js"></script>
    <script src="../assets/javascripts/drilldown.js"></script>
    <script src="../assets/javascripts/exporting.js"></script>
    <script src="../assets/javascripts/heatmap.js"></script>
    <script src="../assets/javascripts/treemap.js"></script>
    <script src="../assets/javascripts/sankey.js"></script>
    <script src="../assets/javascripts/roadmap.js"></script>
        <!-- Counter number -->
    <script src="../assets/javascripts/jquery.counterup.min.js"></script>
    <script type="text/javascript" src="../assets/javascripts/vis.min.js"></script>
        <!-- Autocomplete -->
    <script src="../assets/javascripts/jquery-ui.js"></script>
        <!-- Datatable -->
    <script src="../assets/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="../assets/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="../assets/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="../assets/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
    <script src="../assets/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
    <script src="../assets/vendors/datatables.net-fixedColumn/js/dataTables.fixedColumn.min.js"></script>

    <script src="../assets/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="../assets/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="../assets/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
    <script src="../assets/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
        <!--  Datepicker -->
    <script type="text/javascript" src="../assets/vendors/moment/moment.js"></script>
        <!--  Datepicker -->
    <script type="text/javascript" src="../assets/vendors/daterangepicker/daterangepicker.js"></script>
    <script src="../assets/javascripts/common.js"></script>
    <script type="text/javascript">
            $(document).ready(function () {
                // radio button click
                $('#radioBtn a').on('click', function(){
                    var sel = $(this).data('title');
                    var tog = $(this).data('toggle');
                    $('a[data-toggle="'+tog+'"]').not('[data-title="'+sel+'"]').removeClass('active').addClass('notActive');
                    $('a[data-toggle="'+tog+'"][data-title="'+sel+'"]').removeClass('notActive').addClass('active');
                    if(sel == "B"){
                        $('#_typeS').val("B")
                        $('#bras').val("")
                        $('#bras').attr('placeholder','Search bras...')
                        // autocomplete search contract
                        suggest()
                    }
                    else{
                        $('#_typeS').val("I")
                        $('#bras').val("")
                        $('#bras').attr('placeholder','Search inf host...')
                        jQuery.get('../assets/host_inf.csv', function (data) {
                            $(".autocomplete").autocomplete({
                                source: data.split('\n'),
                                select: function (event, ui) {
                                    $("#bras").val(ui.item.value);
                                    $("#ctSearch").submit();
                                }
                            });
                        });
                    }
                })
                // autocomplete
                if($('#_typeS').val() == "B") {
                    /*jQuery.get('../assets/bras.csv', function (data) {
                        $(".autocomplete").autocomplete({
                            source: data.split('\n'),
                            select: function (event, ui) {
                                $("#bras").val(ui.item.value);
                                $("#ctSearch").submit();
                            }
                        });
                    });*/
                    // autocomplete search contract
                    suggest()
                }
                else{
                    jQuery.get('../assets/host_inf.csv', function (data) {
                        $(".autocomplete").autocomplete({
                            source: data.split('\n'),
                            select: function (event, ui) {
                                $("#bras").val(ui.item.value);
                                $("#ctSearch").submit();
                            }
                        });
                    });
                }
                var start = moment();
                var end = moment();

                if($('#date').val() != "") {
                    var fromDate = $('#date').val().split('/')[0];
                    var toDate = $('#date').val().split('/')[1];
                    start = moment(fromDate);
                    end = moment(toDate);
                }

                function cb(start, end) {
                    $('#reportrange span').html(start.format('YYYY/MM/DD') + ' - ' + end.format('YYYY/MM/DD'));
                }


                function suggest(){
                    // autocomplete search contract
                    var autocompleteOptions = {
                        minLength: 1,
                        source: function (request, response) {
                            $.ajax({
                                url: "/suggest",
                                data: {
                                    ct: $("#bras").val()
                                }
                            }).done(function(dta) {
                                console.log(dta.data)
                                response($.map(dta.data, function(obj) {
                                    return {
                                        value: obj
                                    };
                                }));

                            });
                        },
                        select: function (event, ui) {
                            $("#bras").val(ui.item.value);
                            $("#ctSearch").submit();
                        }
                    };

                    $(".autocomplete").autocomplete(autocompleteOptions)
                            .autocomplete( "instance" )._renderItem = function( ul, item ) {
                        return $( "<li>" )
                                .append( "<div>" + item.value + "</div>" )
                                .appendTo( ul );
                    };
                }

                $('#reportrange').daterangepicker({
                    startDate: start,
                    endDate: end,
                    maxDate: moment(),
                    minDate: moment().subtract(3,'month'),
                    ranges: {
                        'Today': [moment(), moment()],
                        'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                        'This Month': [moment().startOf('month'), moment().endOf('month')],
                        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                    }
                }, cb);
                cb(start, end);

                $('#reportrange').on('apply.daterangepicker', function(ev, picker) {
                    var range = picker.startDate.format('YYYY-MM-DD')+"/"+picker.endDate.format('YYYY-MM-DD');
                    $('#date').val(range);
                    $("#ctSearch").submit();
                });
                @if(rsInfhost != null){
                    /* INF HOST SEARCHING*/
                    var sumAll = 0
                    var arrSumTd = new Array(Number($('#nModule').val())).fill(0)
                    // redraw table tbody module index
                    $('#tbIndex tbody tr').each(function (){
                        var cell = ''
                        var values = ''
                        $(this).find('td').each(function(){
                            cell += $(this).attr('class')+","
                            values += $(this).attr('name')+","
                        })
                        var arrCell = cell.substring(0,cell.length-1).split(',').map( Number );
                        var arrValues = values.substring(0,values.length-1).split(',').map( Number );
                        var th = $(this).find('th').text()
                        $(this).html('')
                        var td = '<th>'+th+'</th>'
                        var sumVl = 0
                        for(var i=0;i< $('#nModule').val();i++){
                            if(arrCell.indexOf(i)>=0){
                                sumVl += arrValues[arrCell.indexOf(i)]
                                td += '<td>'+arrValues[arrCell.indexOf(i)]+'</td>'
                                arrSumTd[i] += Number(arrValues[arrCell.indexOf(i)])
                            }
                            else{
                                td+='<td></td>'
                                arrSumTd[i] += 0
                            }
                        }
                        sumAll += sumVl
                        td += '<th>'+sumVl+'</th>'
                        $(this).append(td)
                    })
                    // set value for sum by module and index
                    $('#ttSum').text(sumAll)
                    for(var i=0;i<$('#nModule').val();i++){
                        $('#tdSum'+i).text(arrSumTd[i])
                    }

                    $('#tbIndex').DataTable( {
                        "scrollY":        "200px",
                        "scrollCollapse": true,
                        "paging":         false,
                        "info":     false,
                        "searching":     false,
                        "sort":     false
                    });
                    $('#tbSf').DataTable( {
                        "scrollY":        "235px",
                        "scrollCollapse": true,
                        "paging":         false,
                        "info":     false,
                        "searching":     false,
                        "sort":     false
                    });
                    $('#tbSplitter').DataTable( {
                        "scrollY":        "300px",
                        "scrollCollapse": true,
                        "paging":         false,
                        "info":     false,
                        "searching":     false,
                        "sort":     false
                    });
                    $('#tbInfHost').DataTable( {
                        "scrollY":        "200px",
                        "scrollCollapse": true,
                        "paging":         false,
                        "info":     false,
                        "searching":     false,
                        "sort":     false
                    });
                    if(@rsInfhost.ticketOutlier.length >0)
                    {
                        var events = parseTicketOut(@Html(Json.stringify(Json.toJson(rsInfhost.ticketOutlier))))
                        $('#time-line-host').show()
                        $('#time-line-host').roadmap(events, {
                            eventsPerSlide: (@rsInfhost.ticketOutlier.length > 6) ? 6 : @rsInfhost.ticketOutlier.length,
                            slide: 1,
                            prevArrow: '<i class="fa fa-chevron-left" style="color: #73879C;font-size:24px" aria-hidden="true"></i>',
                            nextArrow: '<i class="fa fa-chevron-right" style="color: #73879C;font-size:24px" aria-hidden="true"></i>'
                    });
                    }else{
                        $('#time-line-host').hide()
                    }
                    // line col signin and logoff by hourly
                    @if(rsInfhost.sigLogByHourly != null){
                        Highcharts.chart('col-lineSigLog', {
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: ''
                            },
                            subtitle: {
                                text: ''
                            },
                            plotOptions: {
                                column: {
                                    colorByPoint: true
                                }
                            },
                            colors: [
                                '#1ABB9C', 'rgba(255, 102, 86, 1)'
                            ],
                            xAxis: {
                                categories: ["0h", "1h", "2h", "3h", "4h", "5h", "6h", "7h", "8h", "9h", "10h", "11h", "12h", "13h", "14h", "15h", "16h", "17h", "18h", "19h", "20h", "21h", "22h", "23h"]
                            },
                            yAxis: {
                                title: {
                                    text: "Size"
                                }

                            },
                            tooltip: {
                                crosshairs: true,
                                shared: true
                            },
                            plotOptions: {
                                spline: {
                                    marker: {
                                        radius: 4,
                                        lineColor: '#666666',
                                        lineWidth: 1
                                    }
                                }
                            },
                            series: [{
                                type: 'spline',
                                name: 'Signin',
                                data: @Html(Json.stringify(Json.toJson(rsInfhost.sigLogByHourly.sumSig)))
                            },
                                {
                                    type: 'spline',
                                    name: 'Logoff',
                                    data: @Html(Json.stringify(Json.toJson(rsInfhost.sigLogByHourly.sumLog)))
                                }]
                        });
                    }
                    // col and line suyhao
                    @if(rsInfhost.suyhaoModule != null){
                        // line Sigin and logoff by host
                        Highcharts.chart('line-suyhao', {
                            chart: {
                                zoomType: 'xy'
                            },
                            title: {
                                text: ''
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: [{
                                categories: @Html(Json.stringify(Json.toJson(rsInfhost.suyhaoModule.map(x=>x._1)))),
                                crosshair: true,
                                title: {
                                    text: '',
                                }
                            }],
                            yAxis: [{ // Primary yAxis
                                labels: {
                                    format: '{value}',
                                    style: {
                                        color: "#f1b53d"
                                    }
                                },
                                title: {
                                    style: {
                                        color: "#f1b53d"
                                    }
                                }
                            }, { // Secondary yAxis
                                title: {
                                    style: {
                                        color: "#1ABB9C"
                                    }
                                },
                                labels: {
                                    format: '{value}',
                                    style: {
                                        color: "#1ABB9C"
                                    }
                                },
                                opposite: true
                            }],
                            tooltip: {
                                shared: true
                            },

                            series: [
                                {
                                    type: 'column',
                                    name: 'Passed_true',
                                    yAxis: 0,
                                    color: "#f1b53d",
                                    data: @Html(Json.stringify(Json.toJson(rsInfhost.suyhaoModule.map(x=>x._2))))
                                },
                                {
                                    type: 'column',
                                    name: 'Passed_false',
                                    yAxis: 0,
                                    color: "rgb(148, 50, 115)",
                                    data: @Html(Json.stringify(Json.toJson(rsInfhost.suyhaoModule.map(x=>x._3))))
                                }, {
                                    name: 'Rate',
                                    type: 'spline',
                                    yAxis: 1,
                                    color: "#1ABB9C",
                                    data: @Html(Json.stringify(Json.toJson(rsInfhost.suyhaoModule.map(x=>x._4))))

                                }]
                        });
                    }
                    // heat-map hourly error
                    @if(rsInfhost.errorHourly != null){
                        var heat_mapInfTab = Highcharts.chart('heat_mapInfTab', {
                            chart: {
                                type: 'heatmap',
                                marginTop: 40,
                                marginBottom: 80,
                                plotBorderWidth: 1
                            },

                            title: {
                                text: ''
                            },
                            xAxis: {
                                categories: ["0h", "1h", "2h", "3h", "4h", "5h", "6h", "7h", "8h", "9h", "10h", "11h", "12h", "13h", "14h", "15h", "16h", "17h", "18h", "19h", "20h", "21h", "22h", "23h"]
                            },

                            yAxis: {
                                categories: ['Port PON down','Port INF down','Sf Error','Lofi Error','Rouge Error','Lost Signal','Sf Module'],
                                title: null
                            },

                            colorAxis: {
                                min: 0,
                                minColor: '#FFFFFF',
                                maxColor: '#d9534f'
                            },

                            legend: {
                                align: 'right',
                                layout: 'vertical',
                                margin: 0,
                                verticalAlign: 'top',
                                y: 25,
                                symbolHeight: 280
                            },

                            tooltip: {
                                formatter: function () {
                                    return '<b>' + this.series.xAxis.categories[this.point.x] + '</b> <br> has <b>' +
                                            this.point.value + ' <b>' + this.series.yAxis.categories[this.point.y] + '</b>';
                                }
                            },

                            series: [{
                                name: 'Logoff per card',
                                borderWidth: 1,
                                data: getErrorHourlyHeatmap(@Html(Json.stringify(Json.toJson(rsInfhost.errorHourly)))),
                                /*[[0, 0, 10], [1, 0, 92], [2, 0, 35], [3, 0, 72], [4, 0, 38], [5, 0, 88],  [6, 0, 13], [7, 0, 31], [8, 0, 85],  [9, 0, 47]],*/
                                dataLabels: {
                                    enabled: true,
                                    color: '#000000'
                                }
                            }]

                        });
                        // click group time tab
                        $('.nav-pills li').click( function () {
                            // _type: 0 hourly time
                            // _type: 1 frame time
                            $.ajax({
                                url: "/getInfErrHourly?_type=1&id=" + $(this).attr('name')+"&day="+$('#date').val()+"&bras="+$('#bras').val(),
                                cache: false,
                                success: function (dta) {
                                    if(dta != "Error"){
                                        // update chart Heatmap
                                        heat_mapInfTab.xAxis[0].update({categories: dta.cates})
                                        heat_mapInfTab.series[0].setData(getErrorHourlyHeatmap(dta.data), true,true,false)
                                    }
                                    else{
                                        alert("Error when execute query. Please check again your system!")
                                    }
                                }
                            })
                        })
                    }
                  // bubble chart module index
                  @if(rsInfhost.sigLogByModule != null){
                    Highcharts.chart('buble-module', {
                        chart: {
                            type: 'bubble',
                            plotBorderWidth: 1,
                            height: 300,
                            zoomType: 'xy'
                        },

                        title: {
                            text: 'Signin and logoff'
                        },

                        xAxis: {
                            gridLineWidth: 1,
                            title: {
                                text: 'Signin'
                            }
                        },

                        yAxis: {
                            startOnTick: false,
                            endOnTick: false,
                            title: {
                                text: 'Logoff'
                            }
                        },
                        tooltip: {
                            headerFormat: '',
                            pointFormat: '<b>{point.name}</b><br/> Signin: <b>{point.x}</b><br/> Logoff: <b>{point.y}</b>'
                        },
                        series: [{
                            name: 'Module',
                            data: getJsonBubleChart(@Html(Json.stringify(Json.toJson(rsInfhost.sigLogByModule))),0)
                             /*[{
                                name: 'Animals',
                                x: 4, y: 5, z:10,
                                drilldown: '1'
                            }, {
                                name: 'Fruits',
                                x: 14, y: 20, z:20,
                                drilldown: '2'
                            }, {
                                name: 'Cars',
                                x: 8, y: 9, z:7,
                                drilldown: '3'
                            }]*/
                        }],
                        drilldown: {
                            drillUpButton: {
                                relativeTo: 'spacingBox',
                                position: {
                                    y: 0,
                                    x: 0
                                },
                                theme: {
                                    fill: '#85d088',
                                    'stroke-width': 1,
                                    stroke: 'silver',
                                    r: 0,
                                    states: {
                                        hover: {
                                            fill: '#85d088',
                                        }
                                    }
                                }
                            },
                            series: getDrilldownBubleChart(@Html(Json.stringify(Json.toJson(rsInfhost.sigLogbyModuleIndex))),@Html(Json.stringify(Json.toJson(rsInfhost.sigLogByModule.map(x=>x._1)))))
                           /* [{
                                name: '1',
                                id: '1',
                                data: [
                                    { name: 'Cats', x: 5, y: 9, z:7},
                                    { name: 'Dogs', x: 8, y: 8, z:9},
                                    { name: 'Cows', x: 1, y: 5, z:2},
                                    { name: 'Sheep', x: 4, y: 7, z:2},
                                    { name: 'Pigs', x: 4, y: 5, z:7}
                                ]
                            }, {
                                name: '2',
                                id: '2',
                                data: [
                                    { name: 'Apples', x: 2, y: 9, z:6},
                                    { name: 'Oranges', x: 6, y: 5, z:1}
                                ]
                            }, {
                                name: '3',
                                id: '3',
                                data: [
                                    { name: 'Toyota', x: 2, y: 8, z:7},
                                    { name: 'Opel', x: 8, y: 2, z:4},
                                    { name: 'Volkswagen', x: 4, y: 4, z:4}
                                ]
                            }]*/
                        }
                    });
                  }
                }

                @if(response != null){
                /* RESULT BRAS SEARCHING*/
                $('#tbBras').DataTable( {
                    "scrollY":        "200px",
                    "scrollCollapse": true,
                    "paging":         false,
                    "info":     false,
                    "searching":     false,
                    "sort":     false
                });
                if(@response.ticketOutlier.length >0)
                {
                    var events = parseTicketOut(@Html(Json.stringify(Json.toJson(response.ticketOutlier))))
                    $('#time-line-bras').show()
                    $('#time-line-bras').roadmap(events, {
                        eventsPerSlide: (@response.ticketOutlier.length > 6) ? 6 : @response.ticketOutlier.length,
                        slide: 1,
                        prevArrow: '<i class="fa fa-chevron-left" style="color: #73879C;font-size:24px" aria-hidden="true"></i>',
                        nextArrow: '<i class="fa fa-chevron-right" style="color: #73879C;font-size:24px" aria-hidden="true"></i>'
                    });
                }else{
                    $('#time-line-bras').hide()
                }
                // table opview service
                @if(response != null && response.servNameStt != null){
                    var mapService = @Html(Json.stringify(Json.toJson(response.servNameStt.arrService)))
                    var arrName = @Html(Json.stringify(Json.toJson(response.servNameStt.arrName)))
                    var arrStt = @Html(Json.stringify(Json.toJson(response.servNameStt.arrStatus)))
                            $('#tbOpview tbody').append(getBodyService(mapService, arrName, arrStt))
                    // set total all by col opview table
                    var sumColAll = 0;
                    $('.ttRow').each(function () {
                        sumColAll += parseInt($(this).text());
                    });
                    $('#ttColall').text(sumColAll);
                    // set total by col opview table
                    for (var i = 0; i < arrStt.length; i++) {
                        var sumCol = 0;
                        $('.col-' + i).each(function () {
                            sumCol += parseInt($(this).text());
                        });
                        $('#col-' + i).text(sumCol);
                    }
                }
                // table inf service
                @if(response != null && response.devNameStt != null){
                    var devService = @Html(Json.stringify(Json.toJson(response.devNameStt.arrService)))
                    var devName = @Html(Json.stringify(Json.toJson(response.devNameStt.arrName)))
                    var devStt = @Html(Json.stringify(Json.toJson(response.devNameStt.arrStatus)))
                    var devBras = @Html(Json.stringify(Json.toJson(response.devNameStt.arrBras)))
                        $('#tbInfSev tbody').append(getBodyServiceHaveBras(devService, devBras, devName, devStt))
                    // set total all by col inf table
                    var sumDevColAll = 0;
                    $('#tbInfSev .ttRow').each(function () {
                        sumDevColAll += parseInt($(this).text());
                    });
                    $('#ttColallDev').text(sumDevColAll);
                    // set total by col inf table
                    for (var i = 0; i < devStt.length; i++) {
                        var sumColDev = 0;
                        $('#tbInfSev .' + devStt[i]).each(function () {
                            sumColDev += parseInt($(this).text());
                        });
                        $('.infAll_' + devStt[i]).text(sumColDev);
                    }
                }
                /* OPVIEW JS */
                // Tree map status
                @if( response.opServiceStt != null){
                    Highcharts.chart('tree-map', {
                        colorAxis: {
                            minColor: '#FFFFFF',
                            maxColor: Highcharts.getOptions().colors[8]
                        },
                        series: [{
                            type: "treemap",
                            layoutAlgorithm: 'strip',
                            color: "#f1b53d",
                            data: getJsonTreemap(@Html(Json.stringify(Json.toJson(response.opServiceStt))))
                            /*[{
                                name: 'A',
                                value: 6
                            }, {
                                name: 'B',
                                value: 6
                            }, {
                                name: 'C',
                                value: 4
                            }, {
                                name: 'D',
                                value: 3
                            }, {
                                name: 'E',
                                value: 2
                            }, {
                                name: 'F',
                                value: 2
                            }, {
                                name: 'G',
                                value: 1
                            }]*/
                        }],
                        title: {
                            text: ''
                        }
                    });
                }
                /* END TREE MAP JS */
                @if(response.linecardhost != null){
                    Highcharts.chart('buble-card', {

                        chart: {
                            type: 'bubble',
                            plotBorderWidth: 1,
                            zoomType: 'xy'
                        },

                        title: {
                            text: ''
                        },

                        xAxis: {
                            gridLineWidth: 1,
                            title: {
                                text: 'Signin'
                            }
                        },

                        yAxis: {
                            startOnTick: false,
                            endOnTick: false,
                            title: {
                                text: 'Logoff'
                            }
                        },

                        tooltip: {
                            useHTML: true,
                            headerFormat: '<table><th>Line-card-port: </th><td>{series.name}</td></tr>',
                            pointFormat:
                            '<tr><th>Signin:</th><td>{point.x}</td></tr>' +
                            '<tr><th>Logoff:</th><td>{point.y}</td></tr>',
                            footerFormat: '</table>',
                            followPointer: true
                        },

                        series: getJsonBubleChart(@Html(Json.stringify(Json.toJson(response.linecardhost))),1)
                        /*[{
                            data: [{"x":134,"y":222}],
                            name: "Black",
                            marker: {
                                fillColor: {
                                    radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                                    stops: [
                                        [0, '#34495E'],
                                        [1, Highcharts.Color('#34495E').setOpacity(0.5).get('rgba')]
                                    ]
                                }
                            }
                        }, {
                            data: [{"x":134,"y":222}],
                            name: "White",
                            marker: {
                                fillColor: {
                                    radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                                    stops: [
                                        [0, '#1ABB9C'],
                                        [1, Highcharts.Color('#1ABB9C').setOpacity(0.5).get('rgba')]
                                    ]
                                }
                            }
                        }
                        ]*/

                    });
                }
                @if( response.kibanaOpviewBytime != null){
                Highcharts.chart('int-col-hourly', {
                    chart: {
                        zoomType: 'xy'
                    },
                    title: {
                        text: ''
                    },
                    subtitle: {
                        text: ''
                    },
                    xAxis: [{
                        categories: ["0h", "1h", "2h", "3h", "4h", "5h", "6h", "7h", "8h", "9h", "10h", "11h", "12h", "13h", "14h", "15h", "16h", "17h", "18h", "19h", "20h", "21h", "22h", "23h"],
                        crosshair: true,
                        title: {
                            text: '',
                        }
                    }],
                    yAxis: [{ // Primary yAxis
                        labels: {
                            format: '{value}',
                            style: {
                                color: "#1ABB9C"
                            }
                        },
                        title: {
                            text: 'Kibana (errors)',
                            style: {
                                color: "#1ABB9C"
                            }
                        }
                    }, { // Secondary yAxis
                        title: {
                            text: 'Opview (errors)',
                            style: {
                                color: "#5A738E"
                            }
                        },
                        labels: {
                            format: '{value}',
                            style: {
                                color: "#5A738E"
                            }
                        },
                        opposite: true
                    }],
                    tooltip: {
                        shared: true
                    },

                    series: [
                        {
                            type: 'column',
                            name: 'Nerror',
                            yAxis: 0,
                            color: "#1ABB9C",
                            data: @Html(Json.stringify(Json.toJson(response.kibanaOpviewBytime.countK)))
                        }, {
                            name: 'Ntime',
                            type: 'spline',
                            yAxis: 1,
                            color: "#5A738E",
                            data: @Html(Json.stringify(Json.toJson(response.kibanaOpviewBytime.countOp)))

                        }]
                });
                }
                @if(response.sigLogBytime != null){
                // line Sigin and logoff by time
                Highcharts.chart('line-hourly', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: ''
                    },
                    subtitle: {
                        text: ''
                    },
                    plotOptions: {
                        column: {
                            colorByPoint: true
                        }
                    },
                    colors: [
                        '#1ABB9C', 'rgba(255, 102, 86, 1)'
                    ],
                    xAxis: {
                        categories: ["0h", "1h", "2h", "3h", "4h", "5h", "6h", "7h", "8h", "9h", "10h", "11h", "12h", "13h", "14h", "15h", "16h", "17h", "18h", "19h", "20h", "21h", "22h", "23h"]
                    },
                    yAxis: {
                        title: {
                            text: "Size"
                        }

                    },
                    tooltip: {
                        crosshairs: true,
                        shared: true
                    },
                    plotOptions: {
                        spline: {
                            marker: {
                                radius: 4,
                                lineColor: '#666666',
                                lineWidth: 1
                            }
                        }
                    },
                    series: [{
                        type: 'spline',
                        name: 'Signin',
                        data: @Html(Json.stringify(Json.toJson(response.sigLogBytime.sumSig)))
                    },
                        {
                            type: 'spline',
                            name: 'Logoff',
                            data: @Html(Json.stringify(Json.toJson(response.sigLogBytime.sumLog)))
                        }]
                });
                }
                /* KIBANA JS */
                // nerror by severity
                Highcharts.chart('pie-severity', {
                    chart: {
                        type: 'pie'
                    },
                    title: {
                        text: ''
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    plotOptions: {
                        pie: {
                            /*colors: [
                                'rgba(255,99,132,1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],*/
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true
                            },
                            showInLegend: true
                        }
                    },
                    series: [{
                        name: 'Percent error',
                        innerSize: '40%',
                        colorByPoint: true,
                        data: @Html(Json.stringify(Json.toJson(response.kibanaOverview.arrSeverity)))
                        /*[["warning", 12], ["alert", 25], ["infor", 53], ["notice", 15], ["error", 44]]*/
                    }]
                });
                // nerror by facility
                Highcharts.chart('pie-facility', {
                    chart: {
                        type: 'pie'
                    },
                    title: {
                        text: ''
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    plotOptions: {
                        pie: {
                           /* colors: [
                                'rgba(255,99,132,1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],*/
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true
                            },
                            showInLegend: true
                        }
                    },
                    series: [{
                        name: 'Percent',
                        innerSize: '40%',
                        colorByPoint: true,
                        data: @Html(Json.stringify(Json.toJson(response.kibanaOverview.arrFacility)))
                        /*[["KERN", 53], ["PFE", 25], ["USER", 53], ["AUTHOR", 15], ["DAEMON", 44]]*/
                    }]
                });
                // bar chart type error
                Highcharts.chart('bar-error', {
                    chart: {
                        type: 'bar'
                    },
                    title: {
                        text: ''
                    },
                    xAxis: {
                        categories: @Html(Json.stringify(Json.toJson(response.kibanaOverview.arrErrorType.map(x=> x._1))))
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    legend: {
                        reversed: true
                    },
                    plotOptions: {
                        series: {
                            dataLabels: {
                                enabled: true,
                                inside: false,
                                align: 'right'
                            },
                            color: 'rgba(255,99,132,1)'
                        },
                    },
                    series: [{
                        name: 'Nerror',
                        data: @Html(Json.stringify(Json.toJson(response.kibanaOverview.arrErrorType.map(x=> x._2))))
                    }]
                });
                // col chart ntime by ddos
                Highcharts.chart('col-ddos', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: ''
                    },
                    xAxis: {
                        categories: @Html(Json.stringify(Json.toJson(response.kibanaOverview.arrDdos.map(x=> x._1))))
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    legend: {
                        reversed: true
                    },
                    plotOptions: {
                        column: {
                            dataLabels: {
                                enabled: true,
                                crop: false,
                                overflow: 'none'
                            }
                        },
                        series: {
                            color: '#f60'
                        }
                    },
                    series: [{
                        name: 'Ntime',
                        data: @Html(Json.stringify(Json.toJson(response.kibanaOverview.arrDdos.map(x=> x._2))))
                    }]
                });
                /* END KIBANA JS */

                /* INF JS */
                // col service by status
                @if(response.serviceByTime != null){
                    Highcharts.chart('col-service', {
                        chart: {
                            type: 'bar'
                        },
                        title: {
                            text: ''
                        },
                        xAxis: {
                            categories: @Html(Json.stringify(Json.toJson(response.serviceByTime.map(x=> x._1).distinct)))
                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            }
                        },
                        legend: {
                            reversed: true
                        },
                        plotOptions: {
                            series: {
                                stacking: 'normal'
                            },
                        },
                        series: getSeriesStackBar(@Html(Json.stringify(Json.toJson(response.serviceByTime))), @Html(Json.stringify(Json.toJson(response.serviceByTime.map(x=> x._2).distinct))), @Html(Json.stringify(Json.toJson(response.serviceByTime.map(x=> x._1).distinct))))
                    });
                }
                @if(response.sankeyService != null){
                    Highcharts.chart('sankey-service', {
                        title: {
                            text: ''
                        },
                        series: [{
                            keys: ['from', 'to', 'weight'],
                            data: @Html(Json.stringify(Json.toJson(response.sankeyService))),
                            type: 'sankey',
                            name: 'Switch And Monitoring'
                        }]
                    });
                }
                @if(response.siglogByhost != null){
                    // line Sigin and logoff by host
                    Highcharts.chart('line-host', {
                        chart: {
                            zoomType: 'xy'
                        },
                        title: {
                            text: ''
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: [{
                            categories: @Html(Json.stringify(Json.toJson(response.siglogByhost.arrCates))),
                            crosshair: true,
                            title: {
                                text: '',
                            }
                        }],
                        yAxis: [{ // Primary yAxis
                            labels: {
                                format: '{value}',
                                style: {
                                    color: "#1ABB9C"
                                }
                            },
                            title: {
                                //text: 'Size (MB)',
                                style: {
                                    color: "#1ABB9C"
                                }
                            }
                        }, { // Secondary yAxis
                            title: {
                                //text: 'Duration (hours)',
                                style: {
                                    color: "#9B59B6"
                                }
                            },
                            labels: {
                                format: '{value}',
                                style: {
                                    color: "#9B59B6"
                                }
                            },
                            opposite: true
                        }],
                        tooltip: {
                            shared: true
                        },

                        series: [
                            {
                                type: 'column',
                                name: 'Sigin',
                                yAxis: 0,
                                color: "#1ABB9C",
                                data: @Html(Json.stringify(Json.toJson(response.siglogByhost.sumSig)))
                            }, {
                                name: 'Logoff',
                                type: 'spline',
                                yAxis: 1,
                                color: "#9B59B6",
                                data: @Html(Json.stringify(Json.toJson(response.siglogByhost.sumLog)))

                            }]
                    });
                }
                @if(response.infErrorBytime != null){
                    // heat map inf nerror
                    Highcharts.chart('heat_map', {
                        chart: {/*
                            backgroundColor: '#687582',*/
                            type: 'heatmap',
                            marginTop: 40,
                            marginBottom: 80,
                            plotBorderWidth: 1
                        },

                        title: {
                            text: ''
                        },
                        xAxis: {
                            categories: ["0h", "1h", "2h", "3h", "4h", "5h", "6h", "7h", "8h", "9h", "10h", "11h", "12h", "13h", "14h", "15h", "16h", "17h", "18h", "19h", "20h", "21h", "22h", "23h"]
                        },

                        yAxis: {
                            categories: ['Port PON down','Port INF down','Sf Error','Lofi Error','Rouge Error','Lost Signal','Sf Module'],
                            title: null
                        },

                        colorAxis: {
                            min: 0,
                            minColor: '#FFFFFF',
                            maxColor: 'rgba(54, 162, 235, 1)'
                        },

                        legend: {
                            align: 'right',
                            layout: 'vertical',
                            margin: 0,
                            verticalAlign: 'top',
                            y: 25,
                            symbolHeight: 280
                        },

                        tooltip: {
                            formatter: function () {
                                return '<b>' + this.series.xAxis.categories[this.point.x] + '</b> <br> has <b>' +
                                        this.point.value + '</b> <br><b>' + this.series.yAxis.categories[this.point.y] + '</b>';
                            }
                        },

                        series: [{
                            name: 'Logoff per card',
                            borderWidth: 1,
                            data: getErrorHourlyHeatmap(@Html(Json.stringify(Json.toJson(response.infErrorBytime)))),
                            /*[[0, 0, 10], [1, 0, 92], [2, 0, 35], [3, 0, 72], [4, 0, 38], [5, 0, 88],  [6, 0, 13], [7, 0, 31], [8, 0, 85],  [9, 0, 47]],*/
                            dataLabels: {
                                enabled: true,
                                color: '#000000'
                            }
                        }]

                    });
                }
                }
             });

            function getBodyService(dtaService,dtaName,dtaStatus){
                var html = '';
                for (var i = 0; i < dtaName.length; i++) {
                    var jsonArr = [];
                    var ttRow = 0;
                    var arrKey = [];
                    var tr = '<tr><td style="width: 50%">'+dtaName[i]+'</td>';
                    for( var j=0; j< dtaService.length;j++){
                        if(dtaService[j][0] == dtaName[i]){
                            for(var k=0; k< dtaStatus.length;k++){
                                if(dtaService[j][1] == dtaStatus[k]){
                                    ttRow += Number(dtaService[j][2]);
                                   jsonArr.push([k,Number(dtaService[j][2])]);
                                   arrKey.push(k);
                                }
                            }
                        }
                    }
                    var wdTd = parseInt(40/Number(dtaStatus.length))
                    for(var ct=0; ct<dtaStatus.length;ct++){
                        if(arrKey.indexOf(ct)>=0){
                            for(var l=0;l<jsonArr.length;l++){
                                if(jsonArr[l][0]== ct)
                                    tr += '<td style="width: '+wdTd+'%" class="col-'+ct+'">'+jsonArr[l][1]+'</td>';
                            }
                        }
                        else{
                            tr += '<td style="width: '+wdTd+'%">0</td>';
                        }
                    }
                    html += tr+'<th class="ttRow">'+ttRow+'</th></tr>';
                }
                return html;
            }

            function getBodyServiceHaveBras(dtaService, dtaBras, dtaName, dtaStatus){
                var html = '';
                var widStt = Number(45/dtaStatus.length)
                for (var i = 0; i < dtaBras.length; i++) {
                    for( var j=0; j< dtaName.length;j++){
                        var isName =0
                        var totalRow = 0
                        var rsStatus = '';
                        for( var k=0; k< dtaStatus.length;k++){
                            var isStatus = 0
                            for( var id=0; id< dtaService.length;id++){
                                if((dtaBras[i] == dtaService[id][0]) && (dtaName[j] == dtaService[id][1]) && dtaStatus[k] == dtaService[id][2]){
                                  isName =1
                                  isStatus =1
                                  totalRow += dtaService[id][3]
                                  rsStatus += '<td class="'+dtaStatus[k]+'" style="width:'+widStt+'">'+dtaService[id][3]+'</td>'
                                }
                            }
                            if(isStatus == 0) rsStatus += '<td class="'+dtaStatus[k]+'" style="width:'+widStt+'">0</td>'
                        }
                        if(isName == 1) html +='<tr><th style="width: 19%">'+dtaBras[i]+'</th><th style="width: 20%">'+dtaName[j]+'</th>'+rsStatus+'<th class="ttRow" style="widows: 14%;">'+totalRow+'</th></tr>'
                    }
                }
                return html;
            }

            function parseTicketOut(dta){
                var jsonArr = [];
                for (var i = 0; i < dta.length; i++) {
                    var color = (dta[i][0].indexOf('ticket') >=0) ? '#07881f':'#ff5d48'
                    var title = (dta[i][0].indexOf('ticket') >=0) ? dta[i][0].split('_')[0]: dta[i][0]
                    var code = (dta[i][0].indexOf('ticket') >=0) ? dta[i][0].split('_')[1]: ""
                    var issue = (dta[i][0].indexOf('ticket') >=0) ? dta[i][0].split('_')[2] : ""
                    var reason = (dta[i][0].indexOf('ticket') >=0) ? dta[i][0].split('_')[3]: ""
                    jsonArr.push({
                        title: title,
                        code: code,
                        issue: issue,
                        reason: reason,
                        date: dta[i][1],
                        color: color
                    });
                }
                return jsonArr
            }

            function getJsonTreemap(appHour){
                var jsonArr = [];
                for (var i = 0; i < appHour.length; i++) {
                    jsonArr.push({
                        name: appHour[i][0],
                        value: Number(appHour[i][1]),
                        colorValue: Number(appHour[i][1]),
                    });
                }
                return jsonArr
            }

            function getDataHeatmap(data){
                var jsonArr = [];
                for (var i =0 ; i < data.length; i++) {
                    jsonArr.push([Number(data[i][0]),0,Number(data[i][1])]);
                }
                return jsonArr
            }

            function getSeriesStackBar(dta, arrKey1, arrKey2){
                var jsArray = []
                var colors = [
                    '#d9534f',
                    '#73879C',
                    '#1ABB9C',
                    '#f1b53d',
                    '#E74C3C',
                    '#73879C',
                    '#832d1d',
                    '#0000cc',
                    '#09006d',
                    '#cccccc',
                    '#669999',
                    '#f2ccff',
                    '#e6e600',
                    '#132639',
                    '#99cc00',
                    '#466d6d',
                    '#ffc6b3',
                    '#666633',
                    '#ffff00'];
                for(var i=0; i< arrKey1.length; i++ ){
                    var arrData = []
                    for(var j=0;j<arrKey2.length;j++ ) {
                        for (var k = 0; k < dta.length; k++) {
                            if (arrKey1[i] == dta[k][1] && arrKey2[j] == dta[k][0]){
                                arrData.push(dta[k][2])
                            }
                        }
                    }
                    jsArray.push({
                        name: arrKey1[i],
                        data: arrData,
                        color: colors[i]
                    })
                }
                return jsArray
            }

            function getDrilldownBubleChart(dta,arrModule){
                var colors = ['#dc5a78', '#3498DB', '#9B59B6', '#f1b53d', '#E74C3C', '#73879C', '#1ABB9C', '#832d1d', '#0000cc', '#09006d', '#cccccc', '#669999', '#f2ccff', '#e6e600', '#132639', '#99cc00', '#466d6d', '#ffc6b3', '#666633', '#ffff00'];
                var jsonDta = []
                for(var i=0;i<arrModule.length;i++) {
                    var arrIndex = []
                    for (var j = 0; j < dta.length; j++) {
                        if(arrModule[i] == dta[j][0]){
                            arrIndex.push({
                                name: "Index: "+dta[j][1],
                                x:Number(dta[j][2]),
                                y:Number(dta[j][3]),
                                z:(Number(dta[j][2])+Number(dta[j][3]))/2,
                                marker: {
                                    fillColor: {
                                        radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                                        stops: [
                                            [0, colors[i]],
                                            [1, Highcharts.Color(colors[i]).setOpacity(0.9).get('rgba')]
                                        ]
                                    }
                                }
                            })
                        }
                    }
                    jsonDta.push({
                        name:"Module "+arrModule[i],
                        id: arrModule[i],
                        data: arrIndex
                    })
                }
                return jsonDta
            }

            function getJsonBubleChart(dta,_type){
                // _type=0: group single column
                // _type=1: group multi columns
                var colors = [
                    '#dc5a78',
                    '#3498DB',
                    '#9B59B6',
                    '#f1b53d',
                    '#E74C3C',
                    '#73879C',
                    '#1ABB9C',
                    '#832d1d',
                    '#0000cc',
                    '#09006d',
                    '#cccccc',
                    '#669999',
                    '#f2ccff',
                    '#e6e600',
                    '#132639',
                    '#99cc00',
                    '#466d6d',
                    '#ffc6b3',
                    '#666633',
                    '#ffff00'];
                var jsonArr = [];
                for(var i=0;i<dta.length;i++){
                    var sigin= Number(dta[i][1]),logoff=Number(dta[i][2]);
                    if(_type == 1) {
                        if (dta[i][1].indexOf("_") >= 0) {
                            var arrLogSig = dta[i][1].split("_")
                            sigin = Number(arrLogSig[0].split("-")[0]) + Number(arrLogSig[1].split("-")[0])
                            logoff = Number(arrLogSig[0].split("-")[1]) + Number(arrLogSig[1].split("-")[1])
                        }
                        else {
                            sigin = Number(dta[i][1].split("-")[0])
                            logoff = Number(dta[i][1].split("-")[1])
                        }
                        jsonArr.push({
                            data: [{"x":sigin,"y":logoff}],
                            name: dta[i][0],
                            marker: {
                                fillColor: {
                                    radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                                    stops: [
                                        [0, colors[i]],
                                        [1, Highcharts.Color(colors[i]).setOpacity(0.9).get('rgba')]
                                    ]
                                }
                            }
                        });
                    }
                    else{
                        var arrSigLog = dta[i][1].split("_")
                        jsonArr.push({
                            name: "Module: "+dta[i][0],
                            x:Number(arrSigLog[0]),
                            y:Number(arrSigLog[1]),
                            z:(Number(arrSigLog[0])+Number(arrSigLog[1]))/2,
                            marker: {
                                fillColor: {
                                    radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                                    stops: [
                                        [0, colors[i]],
                                        [1, Highcharts.Color(colors[i]).setOpacity(0.9).get('rgba')]
                                    ]
                                }
                            },
                            drilldown:dta[i][0]
                        });
                    }
                }
                return jsonArr;
            }

    </script>
    </body>
</html>